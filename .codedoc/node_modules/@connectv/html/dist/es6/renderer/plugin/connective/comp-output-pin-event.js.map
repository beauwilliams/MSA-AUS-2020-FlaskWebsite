{"version":3,"file":"comp-output-pin-event.js","sourceRoot":"","sources":["../../../../../src/renderer/plugin/connective/comp-output-pin-event.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,MAAM,gBAAgB,CAAC;AAEjD,OAAO,KAAK,CAAC,MAAM,4BAA4B,CAAC;AAEhD,OAAO,EAAE,mBAAmB,EAAE,MAAM,+BAA+B,CAAC;AACpE,OAAO,EAAE,cAAc,EAAE,MAAM,WAAW,CAAC;AAM3C,MAAM,OAAO,yBAAyB;IAAtC;QAkBE,aAAQ,GAAG,cAAc,CAAC,IAAI,CAAC;IACjC,CAAC;IAjBC,IAAI,CAAC,IAAU,EAAE,SAA6B;QAC5C,IAAI,CAAC,CAAC,IAAI,YAAY,gBAAgB,CAAC,IAAI,SAAS,CAAC,OAAO,EAAE;YAE5D,mBAAmB,EAAE,CAAC;YAEtB,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,EAAE,MAAM,CAAC,EAAE,EAAE;gBAC3D,IAAI,SAAS,CAAC,MAAM,CAAC;oBACnB,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CACd,IAAI,CAAC,KAAK,CAAC,EAAE,CACX,IAAI,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,IAAI,EAAE,EAAC,MAAM,EAAE,EAAC,KAAK,EAAC,EAAC,CAAC,CAAC,CAC7D,CACJ,EAAE,IAAI,CAAC,CAAC;YACb,CAAC,CAAC,CAAC;SACJ;IACH,CAAC;CAGF","sourcesContent":["import { isPinLike, sink } from '@connectv/core';\n\nimport * as L from '../../../shared/life-cycle';\n\nimport { polyfillCustomEvent } from '../util/custom-event.polyfill';\nimport { PluginPriority } from \"../plugin\";\n\nimport { CompType, ComponentSignature } from \"../component/types\";\nimport { CompIOPlugin } from \"../component/basic-plugins\";\n\n\nexport class CompOutputPinEventsPlugin<Renderable=RawValue, Tag=CompType<Renderable | string> | string>\nimplements CompIOPlugin<Renderable, Tag> {\n  wire(node: Node, signature: ComponentSignature) {\n    if (!(node instanceof DocumentFragment) && signature.outputs) {\n\n      polyfillCustomEvent();\n\n      Object.entries(signature.outputs).forEach(([name, output]) => {\n        if (isPinLike(output))\n          L.attach(output.to(\n              sink(value =>\n                node.dispatchEvent(new CustomEvent(name, {detail: {value}}))\n              )\n          ), node);\n      });\n    }\n  }\n\n  priority = PluginPriority.High;\n}\n"]}