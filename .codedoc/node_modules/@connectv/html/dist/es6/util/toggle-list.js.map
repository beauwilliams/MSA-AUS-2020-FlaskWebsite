{"version":3,"file":"toggle-list.js","sourceRoot":"","sources":["../../../src/util/toggle-list.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,UAAU,EAAE,aAAa,EAAE,MAAM,MAAM,CAAC;AACjD,OAAO,EAAE,GAAG,IAAI,IAAI,EAAE,MAAM,gBAAgB,CAAC;AAC7C,OAAO,EAAW,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,MAAM,gBAAgB,CAAC;AAOjE,MAAM,kBAAkB,GAAG,CAAC,KAAe,EAAE,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAIhE,MAAM,UAAU,UAAU,CACxB,KAAsB,EACtB,UAAmC;IAEnC,MAAM,WAAW,GAAG,UAAU,IAAI,kBAAyB,CAAC;IAC5D,OAAO,KAAK,CAAC,GACX,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC;SAClB,GAAG,CACF,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,EAAE,CACZ,CAAC,CAAC,CAAC,YAAY,UAAU,CAAC,CAAA,CAAC,CAAA,IAAI,CAAC,CAAC,CAAC,CAAA,CAAC,CAAA,CAAC,CAAC;SACpC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAU,EAAE,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,CACtC,CACF;SACA,EAAE,CAAC,IAAI,EAAE,CAAC;SACV,EAAE,CAAC,GAAG,CAAC,CAAC,CAAsB,EAAE,EAAE,CACjC,WAAW,CACT,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAC3C,CACF,CACF,CAAC;AACJ,CAAC;AAID,MAAM,UAAU,YAAY,CAC1B,KAAgB,EAChB,UAAmC;IAEnC,MAAM,WAAW,GAAG,UAAU,IAAI,kBAAyB,CAAC;IAC5D,OAAO,aAAa,CAAC,GACnB,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC;SAClB,GAAG,CACF,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,CAC5C,CACJ;SACA,IAAI,CACH,IAAI,CAAC,CAAC,CAAsB,EAAE,EAAE,CAC9B,WAAW,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CACxD,CACF,CAAA;AACH,CAAC","sourcesContent":["import { Observable, combineLatest } from \"rxjs\";\nimport { map as _map } from \"rxjs/operators\";\nimport { PinLike, group, wrap, pack, map } from \"@connectv/core\";\n\n\nexport type ReactiveNameMap = {[name: string]: Observable<boolean> | PinLike};\nexport type RxNameMap = {[name: string]: Observable<boolean>};\nexport type NamesAggregatorFunc<T> = (names: string[]) => T;\n\nconst _DefaultAggregator = (names: string[]) => names.join(' ');\n\n\nexport function toggleList(names: ReactiveNameMap): PinLike;\nexport function toggleList<T>(\n  names: ReactiveNameMap,\n  aggregator?: NamesAggregatorFunc<T>\n): PinLike {\n  const _aggregator = aggregator || _DefaultAggregator as any;\n  return group(...\n    Object.entries(names)\n      .map(\n        ([name, $]) =>\n          (($ instanceof Observable)?wrap($):$)\n          .to(map((v: boolean) => [name, v]))\n      )\n    )\n    .to(pack())\n    .to(map((l: [string, boolean][]) =>\n      _aggregator(\n        l.filter(([_, v]) => v).map(([n, _]) => n)\n      )\n    )\n  );\n}\n\n\nexport function rxToggleList(names: RxNameMap): Observable<string>;\nexport function rxToggleList<T>(\n  names: RxNameMap,\n  aggregator?: NamesAggregatorFunc<T>\n): Observable<T> {\n  const _aggregator = aggregator || _DefaultAggregator as any;\n  return combineLatest(...\n    Object.entries(names)\n      .map(\n        ([name, $]) => $.pipe(_map(v => [name, v]))\n      )\n  )\n  .pipe(\n    _map((l: [string, boolean][]) =>\n      _aggregator(l.filter(([_, v]) => v).map(([n, _]) => n))\n    )\n  )\n}\n"]}