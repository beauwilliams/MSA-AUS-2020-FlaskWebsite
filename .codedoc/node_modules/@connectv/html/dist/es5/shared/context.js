"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function set(node, context) {
    node.context = {
        values: context || {},
        ref: node
    };
}
exports.set = set;
function _resolve(node, keys) {
    var _node = node;
    if (_node.context) {
        var missing = keys.filter(function (k) { return !(k in _node.context.values); });
        if (missing.length > 0) {
            var _ref = _node.context.ref;
            if (_ref) {
                var _parent = _ref.parentNode;
                if (_parent) {
                    var ctx_1 = _resolve(_parent, missing);
                    missing.forEach(function (key) { return _node.context.values[key] = ctx_1.values[key]; });
                }
            }
        }
        return _node.context;
    }
    else {
        var _parent = node.parentNode;
        if (_parent) {
            var ctx = _resolve(_parent, keys);
            _node.context = ctx;
            return ctx;
        }
        else
            return {
                values: {},
                ref: node
            };
    }
}
function resolve(node, keys) {
    return _resolve(node, keys).values;
}
exports.resolve = resolve;
exports.CTX = { set: set, resolve: resolve };
//# sourceMappingURL=context.js.map