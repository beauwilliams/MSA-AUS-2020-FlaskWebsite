"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@connectv/core");
var rxjs_1 = require("rxjs");
var marker_1 = require("./marker");
var scan_1 = require("./util/scan");
function Conditional(props, renderer) {
    var start = renderer.create(marker_1.Marker, null);
    var end = renderer.create(marker_1.Marker, null);
    this.track.mark(start);
    var cond = (props.if instanceof rxjs_1.Observable) ? core_1.wrap(props.if) : props.if;
    var latest;
    this.track(cond.to(core_1.sink(function (value) {
        if (value !== latest) {
            latest = value;
            scan_1.scanRemove(start, end);
            if (value)
                renderer.render(props.then()).after(start);
            else if (props.else)
                renderer.render(props.else()).after(start);
        }
    })));
    return renderer.create("fragment", null,
        start,
        end);
}
exports.Conditional = Conditional;
//# sourceMappingURL=conditional.js.map