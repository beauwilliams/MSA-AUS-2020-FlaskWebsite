"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var rxjs_1 = require("rxjs");
var operators_1 = require("rxjs/operators");
var core_1 = require("@connectv/core");
var _DefaultAggregator = function (names) { return names.join(' '); };
function toggleList(names, aggregator) {
    var _aggregator = aggregator || _DefaultAggregator;
    return core_1.group.apply(void 0, Object.entries(names)
        .map(function (_a) {
        var name = _a[0], $ = _a[1];
        return (($ instanceof rxjs_1.Observable) ? core_1.wrap($) : $)
            .to(core_1.map(function (v) { return [name, v]; }));
    })).to(core_1.pack())
        .to(core_1.map(function (l) {
        return _aggregator(l.filter(function (_a) {
            var _ = _a[0], v = _a[1];
            return v;
        }).map(function (_a) {
            var n = _a[0], _ = _a[1];
            return n;
        }));
    }));
}
exports.toggleList = toggleList;
function rxToggleList(names, aggregator) {
    var _aggregator = aggregator || _DefaultAggregator;
    return rxjs_1.combineLatest.apply(void 0, Object.entries(names)
        .map(function (_a) {
        var name = _a[0], $ = _a[1];
        return $.pipe(operators_1.map(function (v) { return [name, v]; }));
    })).pipe(operators_1.map(function (l) {
        return _aggregator(l.filter(function (_a) {
            var _ = _a[0], v = _a[1];
            return v;
        }).map(function (_a) {
            var n = _a[0], _ = _a[1];
            return n;
        }));
    }));
}
exports.rxToggleList = rxToggleList;
//# sourceMappingURL=toggle-list.js.map