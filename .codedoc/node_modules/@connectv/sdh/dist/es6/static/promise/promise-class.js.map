{"version":3,"file":"promise-class.js","sourceRoot":"","sources":["../../../../src/static/promise/promise-class.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,cAAc,EAAE,cAAc,EAAkB,MAAM,gBAAgB,CAAC;AAGhF,OAAO,EAAE,aAAa,EAAE,MAAM,wBAAwB,CAAC;AAGvD,MAAM,OAAO,kBAAkB;IAA/B;QAGE,aAAQ,GAAG,cAAc,CAAC,QAAQ,CAAC;IAkBrC,CAAC;IAhBC,OAAO,CAAC,IAAY,EAAE,MAA6B,EAAE,IAAiB;QACpE,IAAI,IAAI,KAAK,OAAO,IAAI,MAAM,YAAY,OAAO,EAAE;YACjD,aAAa,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;gBAClC,IAAI,OAAO,GAAG,CAAC,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;gBACpD,MAAM,KAAK,GAAG,cAAc,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;gBACvC,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC;oBAClB,OAAO,IAAI,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBAEnC,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACtC,CAAC,CAAC,CAAC,CAAC;YAEJ,OAAO,IAAI,CAAC;SACb;QAED,OAAO,KAAK,CAAC;IACf,CAAC;CACF","sourcesContent":["import { ClassListFixed, PluginPriority, PropertyPlugin } from '@connectv/html';\n\n\nimport { attachPromise } from \"../../shared/lifecycle\";\n\n\nexport class PromiseClassPlugin<R, T> implements \n  PropertyPlugin<R | Promise<RawValue>, T> {\n\n  priority = PluginPriority.Fallback;\n\n  setprop(prop: string, target: R | Promise<RawValue>, host: HTMLElement) {\n    if (prop === 'class' && target instanceof Promise) {\n      attachPromise(host, target.then(v => {\n        let classes = (v !== undefined) ? v.toString() : '';\n        const fixed = ClassListFixed.get(host);\n        if (fixed.length > 0)\n          classes += ' ' + fixed.join(' ');\n\n        host.setAttribute('class', classes);\n      }));\n\n      return true;\n    }\n\n    return false;\n  }\n}\n"]}