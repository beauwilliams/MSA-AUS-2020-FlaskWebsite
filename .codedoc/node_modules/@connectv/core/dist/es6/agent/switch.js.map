{"version":3,"file":"switch.js","sourceRoot":"","sources":["../../../src/agent/switch.ts"],"names":[],"mappings":"AACA,OAAO,MAAM,MAAM,eAAe,CAAC;AAEnC,OAAO,EAAE,KAAK,EAAE,MAAM,SAAS,CAAC;AAGhC,MAAM,OAAO,MAAO,SAAQ,KAAK;IAG/B,YAAY,GAAG,KAAY;QACzB,KAAK,CAAC;YACJ,MAAM,EAAE,CAAC,QAAQ,CAAC;YAClB,OAAO,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;SACnD,CAAC,CAAC;QAEH,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACrB,CAAC;IAED,IAAW,MAAM,KAAK,OAAO,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC1C,IAAI,CAAC,KAAa,IAAI,OAAO,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IAE5C,YAAY,CAAC,KAAa;QAClC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QACxB,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAY,CAAC,CAAC;QAErC,OAAO,IAAI,CAAC,MAAM;aACf,EAAE,CAAC,CAAC,OAAO,KAAK,KAAK,UAAU,CAAC,CAAA,CAAC;YAC9B,MAAM,CAAC,KAAK,CAAC,CAAA,CAAC;YACd,MAAM,CAAC,CAAC,KAAU,EAAE,EAAE,CAAC,KAAK,KAAK,KAAK,CAAC,CAAC,CAC3C;IACL,CAAC;CACF;AAGD,MAAM,UAAU,OAAO,CAAC,GAAG,KAAY,IAAI,OAAO,IAAI,MAAM,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;AAGzE,eAAe,OAAO,CAAC","sourcesContent":["import { PinLike } from '../pin/pin-like';\nimport filter from '../pin/filter';\n\nimport { Agent } from './agent';\n\n\nexport class Switch extends Agent {\n  readonly cases : any[];\n\n  constructor(...cases: any[]) {\n    super({\n      inputs: ['target'],\n      outputs: cases.map((_, index) => index.toString()),\n    });\n\n    this.cases = cases;\n  }\n\n  public get target() { return this.in('target'); }\n  public case(index: number) { return this.out(index); }\n\n  protected createOutput(label: string): PinLike {\n    this.checkOutput(label);\n    let _case = this.cases[label as any];\n\n    return this.target\n      .to((typeof _case === 'function')?\n          filter(_case):\n          filter((value: any) => _case === value))\n      ;\n  }\n}\n\n\nexport function _switch(...cases: any[]) { return new Switch(...cases); }\n\n\nexport default _switch;\n"]}