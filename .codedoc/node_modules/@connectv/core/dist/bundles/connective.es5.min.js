var connective=function(t,p,c,i){"use strict";function s(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,n,e){return n&&r(t.prototype,n),e&&r(t,e),t}function a(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function f(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&o(t,n)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,n){return(o=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function h(t,n,e){return(h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,n,e){var r=[null];r.push.apply(r,n);var i=new(Function.bind.apply(t,r));return e&&o(i,e.prototype),i}).apply(null,arguments)}function v(t){var e="function"==typeof Map?new Map:void 0;return(v=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return h(t,arguments,l(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),o(n,t)})(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,n){return!n||"object"!=typeof n&&"function"!=typeof n?y(t):n}function k(t,n,e){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,n,e){var r=function(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=l(t)););return t}(t,n);if(r){var i=Object.getOwnPropertyDescriptor(r,n);return i.get?i.get.call(e):i.value}})(t,n,e||t)}function _(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],r=!0,i=!1,u=void 0;try{for(var o,c=t[Symbol.iterator]();!(r=(o=c.next()).done)&&(e.push(o.value),!n||e.length!==n);r=!0);}catch(t){i=!0,u=t}finally{try{r||null==c.return||c.return()}finally{if(i)throw u}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function b(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}i=i&&i.hasOwnProperty("default")?i.default:i;var n=function(){function t(){s(this,t)}return u(t,[{key:"track",value:function(t){return this._sub||(this._sub=new p.Subscription),this._sub.add(t),t}},{key:"untrack",value:function(t){return this._sub&&this._sub.remove(t),this}},{key:"clear",value:function(){return this._sub&&(this._sub.unsubscribe(),this._sub=void 0),this}},{key:"tracking",get:function(){return!!this._sub}}]),t}();function g(t){return!!t.bind&&"function"==typeof t.bind}var e=function(){function t(){return s(this,t),d(this,l(t).call(this,"A group of pins does not have an observable."))}return f(t,v(Error)),t}(),m=function(){function t(){return s(this,t),d(this,l(t).apply(this,arguments))}return f(t,n),u(t,[{key:"from",value:function(){var t;return(t=this.entries).from.apply(t,arguments)}},{key:"to",value:function(){var t;return(t=this.exits).to.apply(t,arguments)}},{key:"serialFrom",value:function(){var t;return(t=this.entries).serialFrom.apply(t,arguments)}},{key:"serialTo",value:function(){var t;return(t=this.exits).serialTo.apply(t,arguments)}},{key:"subscribe",value:function(t,n,e){return this.exits.subscribe(t,n,e)}},{key:"observable",get:function(){return this.exits.observable}}]),t}(),w=function(){function u(t){var n;s(this,u);var e=_(((n=d(this,l(u).call(this))).factory=t)(),2),r=e[0],i=e[1];return n.entries=r instanceof E?r:O.apply(void 0,b(r)),n.exits=i instanceof E?i:O.apply(void 0,b(i)),n}return f(u,m),u}();var E=function(){function n(t){s(this,n),this.pins=t}return u(n,[{key:"from",value:function(){for(var t=this,n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return e.forEach(function(n){return t.pins.forEach(function(t){return t.from(n)})}),j.apply(void 0,e)}},{key:"to",value:function(){for(var t=this,n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return e.forEach(function(n){return t.pins.forEach(function(t){return t.to(n)})}),x.apply(void 0,e)}},{key:"serialFrom",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.filter(function(t){return t instanceof m}).forEach(function(t){for(var n=0;n<Math.min(e.pins.length,t.exits.pins.length);n++)e.pins[n].from(t.exits.pins[n])});for(var i=n.filter(function(t){return!(t instanceof m)}),u=0;u<Math.min(this.pins.length,i.length);u++)this.pins[u].from(i[u]);return j.apply(void 0,n)}},{key:"serialTo",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.filter(function(t){return t instanceof m}).forEach(function(t){for(var n=0;n<Math.min(e.pins.length,t.entries.pins.length);n++)e.pins[n].to(t.entries.pins[n])});for(var i=n.filter(function(t){return!(t instanceof m)}),u=0;u<Math.min(this.pins.length,i.length);u++)this.pins[u].to(i[u]);return x.apply(void 0,n)}},{key:"clear",value:function(){return this.pins.forEach(function(t){return t.clear()}),this}},{key:"bind",value:function(){return this.pins.forEach(function(t){g(t)&&t.bind()}),this}},{key:"subscribe",value:function(e,r,i){return this.pins.reduce(function(t,n){return t.add(n.subscribe(e,r,i)),t},new p.Subscription)}},{key:"observable",get:function(){throw new e}}]),n}();function O(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return new E(n)}function x(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];if(1!=n.length)return O.apply(void 0,b(n.reduce(function(t,n){return n instanceof m?t.concat(n.exits.pins):t.concat([n])},[])));var r=n[0];return r instanceof m?r.exits:r}function j(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];if(1!=n.length)return O.apply(void 0,b(n.reduce(function(t,n){return n instanceof m?t.concat(n.entries.pins):t.concat([n])},[])));var r=n[0];return r instanceof m?r.entries:r}var A=function(){function t(){return s(this,t),d(this,l(t).apply(this,arguments))}return f(t,n),u(t,[{key:"to",value:function(){for(var n=this,t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.forEach(function(t){return t.from(n)}),x.apply(void 0,e)}},{key:"from",value:function(){for(var n=this,t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.forEach(function(t){t instanceof E?t.pins.forEach(function(t){return n.connect(t)}):t instanceof m?t.exits.pins.forEach(function(t){return n.connect(t)}):n.connect(t)}),j.apply(void 0,e)}},{key:"serialTo",value:function(){for(var n=this,t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.forEach(function(t){t instanceof m?0<t.entries.pins.length&&t.entries.pins[0].from(n):t.from(n)}),x.apply(void 0,e)}},{key:"serialFrom",value:function(){for(var n=this,t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.forEach(function(t){t instanceof m?0<t.exits.pins.length&&n.connect(t.exits.pins[0]):n.connect(t)}),x.apply(void 0,e)}},{key:"subscribe",value:function(t,n,e){return n||e?this.track(this.observable.pipe(c.map(function(t){return t.value})).subscribe(t,n,e)):this.track(this.observable.pipe(c.map(function(t){return t.value})).subscribe(t))}}]),t}(),S=function(){function t(){return s(this,t),d(this,l(t).call(this,"Attempted to modify pin after it was locked.\nCheck the following link for more info:\nhttps://connective.dev/docs/pin#subscribing-and-binding"))}return f(t,v(Error)),t}(),M=function(){function t(){return s(this,t),d(this,l(t).call(this,"Unresolved pin observable."))}return f(t,v(Error)),t}(),q=function(){function n(){var t;return s(this,n),(t=d(this,l(n).call(this)))._resolving=!1,t._deference_connected=!1,t._inbound=[],t}return f(n,A),u(n,[{key:"connect",value:function(t){if(this.locked)throw new S;return this._inbound.includes(t)||this._inbound.push(t),this}},{key:"clear",value:function(){return this._inbound.length=0,this._observable=void 0,this._deference_connected=!1,this._deferred&&(this._deferred.complete(),this._deferred=void 0),k(l(n.prototype),"clear",this).call(this)}},{key:"isConnected",value:function(){return 0<this._inbound.length}},{key:"observable",get:function(){var t=this;if(this.shouldResolve(this._inbound,this._observable)){if(this._resolving)return this._deferred||(this._deferred=new p.Subject),this._deferred;if(this._resolving=!0,this._observable=this.resolve(this._inbound),this._deferred){var n=this._observable;this._observable=p.defer(function(){return t._deference_connected||(t.track(n.subscribe(t._deferred)),t._deference_connected=!0),n})}this._resolving=!1}if(!this._observable)throw new M;return this._observable}},{key:"locked",get:function(){return this.isLocked(this._observable)}},{key:"connected",get:function(){return this.isConnected()}}]),n}(),P=function(){function t(){return s(this,t),d(this,l(t).apply(this,arguments))}return f(t,q),u(t,[{key:"isLocked",value:function(t){return void 0!==t}},{key:"shouldResolve",value:function(t,n){return void 0===n}},{key:"resolve",value:function(t){return 1==t.length?t[0].observable:p.merge.apply(void 0,b(t.map(function(t){return t.observable})))}}]),t}();function I(){return new P}var C=function(){function e(){var t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){return new P};return s(this,e),(t=d(this,l(e).call(this))).factory=n,t._pins={},t}return f(e,n),u(e,[{key:"get",value:function(t){if(t in this._pins)return this._pins[t];var n=this.factory(t);return this._pins[t]=n,this._subject&&this._subject.next([t,n]),n}},{key:"instantiated",value:function(t){return t in this._pins}},{key:"subscribe",value:function(n){return this._subject||(this._subject=new p.Subject),this.entries.forEach(function(t){return n.apply(void 0,b(t))}),this.track(this._subject.subscribe(function(t){return n.apply(void 0,b(t))}))}},{key:"clear",value:function(){return this.pins.forEach(function(t){return t.clear()}),this._pins={},this._subject&&(this._subject.complete(),this._subject=void 0),k(l(e.prototype),"clear",this).call(this)}},{key:"pins",get:function(){return Object.values(this._pins)}},{key:"entries",get:function(){return Object.entries(this._pins)}}]),e}();function R(t){return void 0!==t&&void 0!==t.outputs&&void 0!==t.outputs.length&&(void 0===t.inputs||void 0!==t.inputs.length)}function F(t){return void 0!==t&&"function"==typeof t.in&&"function"==typeof t.out&&t.inputs instanceof C&&t.outputs instanceof C&&void 0!==t.signature&&R(t.signature)}function L(t){s(this,L),this.values=t}var N=function(){function r(t,n){var e;return s(this,r),(e=d(this,l(r).call(this,"Input ".concat(t," not in signature {inputs: ").concat(n.inputs,"}.\nRead this for more information:\nhttps://connective.dev/docs/agent#signature")))).input=t,e.signature=n,e}return f(r,v(Error)),r}(),T=function(){function r(t,n){var e;return s(this,r),(e=d(this,l(r).call(this,"Output ".concat(t," not in signature {outputs: ").concat(n.outputs,"}.\nRead this for more information:\nhttps://connective.dev/docs/agent#signature")))).output=t,e.signature=n,e}return f(r,v(Error)),r}(),K=function(){function n(t){return s(this,n),d(this,l(n).call(this,"".concat(t.constructor?t.constructor.name:t," is not a properly defined PartialFlow.\nFor more information, follow this link:\nhttps://connective.dev/docs/agent#implicit-connection")))}return f(n,v(Error)),n}(),D=function(){function e(t){var n;return s(this,e),(n=d(this,l(e).call(this))).signature=t,n._inputs=new C(function(t){return n.createInput(t)}),n._outputs=new C(function(t){return n.createOutput(t)}),n}return f(e,m),u(e,[{key:"in",value:function(t){return this._inputs.get(t.toString())}},{key:"out",value:function(t){return this._outputs.get(t.toString())}},{key:"clear",value:function(){return this._inputs.clear(),this._outputs.clear(),k(l(e.prototype),"clear",this).call(this)}},{key:"checkInput",value:function(t){if(!this.signature.inputs||!this.signature.inputs.includes(t))throw new N(t,this.signature)}},{key:"checkOutput",value:function(t){if(!this.signature.outputs.includes(t))throw new T(t,this.signature)}},{key:"createInput",value:function(t){return this.checkInput(t),new P}},{key:"createOutput",value:function(t){return this.checkOutput(t),new P}},{key:"createEntries",value:function(){throw new K(this)}},{key:"createExits",value:function(){throw new K(this)}},{key:"entries",get:function(){if(!this._entries){var t=this.createEntries();this._entries=t instanceof E?t:O.apply(void 0,b(t))}return this._entries}},{key:"exits",get:function(){if(!this._exits){var t=this.createExits();this._exits=t instanceof E?t:O.apply(void 0,b(t))}return this._exits}},{key:"inputs",get:function(){return this._inputs}},{key:"outputs",get:function(){return this._outputs}}]),e}(),B=function(){function n(t){return s(this,n),d(this,l(n).call(this,"No child with name ".concat(t," is defined.")))}return f(n,v(Error)),n}(),G=function(){function n(t){return s(this,n),d(this,l(n).call(this,"Child ".concat(t," is not an Agent.")))}return f(n,v(Error)),n}(),U=function(){function n(t){return s(this,n),d(this,l(n).call(this,"Child ".concat(t," is not a Pin.")))}return f(n,v(Error)),n}(),z=function(){function e(t){var n;return s(this,e),(n=d(this,l(e).call(this,t))).init(),n}return f(e,D),u(e,[{key:"init",value:function(){this.build(),this.wire()}},{key:"add",value:function(t,n){if(this._children||(this._children={}),!n)return this.add("".concat(Object.keys(this._children).length),t);var e=t;return g(this._children[e]=n)&&this.toBind(n),n}},{key:"child",value:function(t){if("string"!=typeof t)return this.child(t.toString());if(this._children&&t in this._children)return this._children[t];throw new B(t)}},{key:"pin",value:function(t){var n=this.child(t);if(n instanceof D)throw new U(t.toString());return n}},{key:"agent",value:function(t){var n=this.child(t);if(!(n instanceof D))throw new G(t.toString());return n}},{key:"toBind",value:function(t){return this._bindables||(this._bindables=[]),this._bindables.push(t),this}},{key:"bind",value:function(){return this._bindables&&this._bindables.forEach(function(t){return t.bind()}),this}},{key:"clear",value:function(){return this._children&&(Object.values(this._children).forEach(function(t){return t.clear()}),this._children=void 0),this._bindables&&(this._bindables=void 0),k(l(e.prototype),"clear",this).call(this)}}]),e}(),J={},W=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};s(this,r),this.value=t,this.context=n}return u(r,[{key:"fork",value:function(t){return new r(t,this.context)}}],[{key:"from",value:function(t,n){var e=1<arguments.length&&void 0!==n?n:J;return new r(e===J?t.map(function(t){return t.value}):e,t.reduce(function(i,t){return Object.entries(t.context).forEach(function(t){var n=_(t,2),e=n[0],r=n[1];if(e in i){if(i[e]==r)return i;i[e]instanceof L?r instanceof L?i[e]=new L(i[e].values.concat(r.values.filter(function(t){return!i[e].values.includes(t)}))):i[e].values.includes(r)||i[e].values.push(r):r instanceof L?r.values.includes(i[e])?i[e]=r:i[e]=new L([i[e]].concat(r.values)):i[e]=new L([i[e],r])}else i[e]=r}),i},{}))}}]),r}();function H(t,n){return new W(t,n)}var V={},Q=function(){function e(){var t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:V;return s(this,e),(t=d(this,l(e).call(this))).val=n,t}return f(e,P),u(e,[{key:"resolve",value:function(t){var n=this;if(this.val instanceof C){var e=this.val.entries;return 0==e.length?p.of(H()):p.zip.apply(void 0,b(e.map(function(t){return t[1].observable}))).pipe(c.map(function(r){return W.from(r,e.reduce(function(t,n,e){return t[n[0]]=r[e].value,t},{}))}))}if(0==t.length)return p.of(H(this.val));var r=p.zip.apply(void 0,b(t.map(function(t){return t.observable})));return this.val!==V?r.pipe(c.map(function(t){return W.from(t,n.val)})):r.pipe(c.map(function(t){return W.from(t)}))}}]),e}();function X(t){return new Q(t)}var Y=function(){function n(t){var e;return s(this,n),((e=d(this,l(n).call(this))).pinmap=t)&&e.track(t.subscribe(function(t,n){return n.to(y(e))})),e}return f(n,P),u(n,[{key:"resolve",value:function(t){if(this.pinmap){var n=this.pinmap.entries;return 0==n.length?p.of(H()):p.combineLatest.apply(void 0,b(n.map(function(t){return t[1].observable}))).pipe(c.map(function(r){return W.from(r,n.reduce(function(t,n,e){return t[n[0]]=r[e].value,t},{}))}))}return p.combineLatest.apply(void 0,b(t.map(function(t){return t.observable}))).pipe(c.map(function(t){return W.from(t)}))}}]),n}();function Z(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=n.map(function(t){return t instanceof C?new Y(t):t});return 0==r.length?new Y:1==r.length?r[0]instanceof Y?r[0]:r[0].to(new Y):O.apply(void 0,b(r)).to(new Y)}var $=function(){function r(t,n){var e;return s(this,r),(e=d(this,l(r).call(this,t instanceof Error?t.message:t))).emission=n,t instanceof Error?e.original=t:e.original=new Error(t),e}return f(r,v(Error)),u(r,[{key:"message",get:function(){return this.original.message}},{key:"stack",get:function(){return this.original.stack}}]),r}();var tt=function(){function e(t){var n;return s(this,e),(n=d(this,l(e).call(this))).pipes=t,n}return f(e,P),u(e,[{key:"resolve",value:function(t){return this.pipes.reduce(function(t,n){return t.pipe(n)},1==t.length?t[0].observable:p.merge.apply(void 0,b(t.map(function(t){return t.observable}))))}}]),e}();function nt(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return new tt(n)}var et=function(){function e(t){var n;return s(this,e),(n=d(this,l(e).call(this,t.length<=1?[c.filter(function(n){try{return t(n.value)}catch(t){throw new $(t,n)}})]:[c.mergeMap(function(e){return new p.Observable(function(n){t(e.value,function(t){n.next(t),n.complete()},function(t){n.error(new $(t,e))},e.context)}).pipe(c.filter(function(t){return!!t}),c.map(function(t){return e}))}),c.share()]))).filter=t,n}return f(e,tt),e}();function rt(t){return new et(t)}function it(){return new et(function(){return!1})}var ut=function(){function e(t){var n;return s(this,e),(n=d(this,l(e).call(this,t.length<=1?[c.map(function(n){try{return n.fork(t(n.value))}catch(t){throw new $(t,n)}})]:[c.mergeMap(function(e){return new p.Observable(function(n){t(e.value,function(t){n.next(e.fork(t)),n.complete()},function(t){n.error(new $(t,e))},e.context)})}),c.share()]))).map=t,n}return f(e,tt),e}();function ot(t){return new ut(t)}var ct=function(){function e(t){var n;return s(this,e),(n=d(this,l(e).call(this,"Following inputs are missing from provided data: ".concat(t,".\nRead this for more information:\nhttps://connective.dev/docs/node#optional")))).missing=t,n}return f(e,v(Error)),e}(),st=function(){function t(i){var u;return s(this,t),(u=d(this,l(t).call(this,i)))._control_required=!0,u._control=X(),u._res=Z(u.inputs,u.control.to(ot(function(){return u._control_required=!1}))).to(rt(function(){return!u._control_required})).to(ot(function(n,e,r,t){u._control.connected&&(u._control_required=!0),i.required&&i.required.some(function(t){return!(n&&n[0]&&t in n[0])})?r(new ct(i.required.filter(function(t){return!(n&&n[0]&&t in n[0])}))):u.run(n[0],function(t,n){u.signature.outputs.includes(t)?e({out:t,data:n}):r(new T(t,u.signature))},r,t)})),u}return f(t,D),u(t,[{key:"createOutput",value:function(n){return this.checkOutput(n),this._res.to(rt(function(t){return t.out==n})).to(ot(function(t){return t.data}))}},{key:"createEntries",value:function(){var n=this;return(this.signature.inputs||[]).map(function(t){return n.in(t)})}},{key:"createExits",value:function(){var n=this;return this.signature.outputs.map(function(t){return n.out(t)})}},{key:"clear",value:function(){return this.control.clear(),k(l(t.prototype),"clear",this).call(this)}},{key:"control",get:function(){return this._control}}]),t}(),at=function(){function r(t,n){var e;return s(this,r),(e=d(this,l(r).call(this,t)))._run=n,e}return f(r,st),u(r,[{key:"run",value:function(t,n,e,r){this._run.apply(this,[t,n,e,r])}}]),r}();var ft=function(){function r(t,n){var e;return s(this,r),(e=d(this,l(r).call(this,{inputs:"function"==typeof t?[]:t,required:"function"==typeof t?[]:t,outputs:["result"]}))).func=n||t,e}return f(r,st),u(r,[{key:"run",value:function(n,e,r,t){var i=this.signature.inputs?this.signature.inputs.map(function(t){return n[t]}):[];try{var u=this.func.apply(void 0,i.concat(t));"function"==typeof u?u.apply(void 0,[function(t){return e("result",t)},r]):e("result",u)}catch(t){r(t)}}},{key:"result",get:function(){return this.out("result")}}]),r}();function lt(t,n){if(n)return new ft(t,n);var e=t;return new ft(Array.apply(0,{length:e.length}).map(function(t,n){return n.toString()}),e)}var ht=function(){function n(){var t;return s(this,n),(t=d(this,l(n).call(this,{inputs:["value"],outputs:["value"]})))._control=new Q,t}return f(n,D),u(n,[{key:"createOutput",value:function(t){return this.checkOutput(t),O(this.control,this.input).to(new Q).to(rt(function(t){var n=_(t,2),e=n[0];n[1];return e.every(function(t){return!!t})})).to(ot(function(t){var n=_(t,2);n[0];return n[1]}))}},{key:"createEntries",value:function(){return[this.input]}},{key:"createExits",value:function(){return[this.output]}},{key:"clear",value:function(){return this.control.clear(),k(l(n.prototype),"clear",this).call(this)}},{key:"input",get:function(){return this.in("value")}},{key:"output",get:function(){return this.out("value")}},{key:"control",get:function(){return this._control}}]),n}();var pt=function(){function n(t){var e;return s(this,n),(e=d(this,l(n).call(this,t.signature))).core=t,e._control_required=!0,e._control=X(),e._pack=Z(e.inputs,e._control.to(ot(function(){return e._control_required=!1}))).to(rt(function(){return!e._control_required})).to(ot(function(t){return e._control.connected&&(e._control_required=!0),t[0]})),e.track(t.inputs.subscribe(function(n,t){e._pack.to(ot(function(t){return t[n]})).to(t)})),e.track(t.outputs.subscribe(function(t,n){n.to(e.out(t))})),e}return f(n,D),u(n,[{key:"createInput",value:function(t){return this.core.in(t),k(l(n.prototype),"createInput",this).call(this,t)}},{key:"createOutput",value:function(t){return this.core.out(t),k(l(n.prototype),"createOutput",this).call(this,t)}},{key:"clear",value:function(){return this._control.clear(),this._pack.clear(),this.core.clear(),k(l(n.prototype),"clear",this).call(this)}},{key:"control",get:function(){return this._control}}]),n}();var vt=function(){function e(){var t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new p.Subject;return s(this,e),(t=d(this,l(e).call(this)))._subject=n,t}return f(e,q),u(e,[{key:"send",value:function(t,n){this.emit(H(t,n))}},{key:"emit",value:function(t){this._subject.next(t)}},{key:"clear",value:function(){return this._subject.complete(),this._subject=new p.Subject,k(l(e.prototype),"clear",this).call(this)}},{key:"isConnected",value:function(){return this.tracking||k(l(e.prototype),"isConnected",this).call(this)}},{key:"resolve",value:function(t){var n=this;return t.forEach(function(t){n.track(t.observable.subscribe(n._subject))}),t.length=0,this._subject}},{key:"isLocked",value:function(){return!1}},{key:"shouldResolve",value:function(t,n){return 0<t.length||!n}}]),e}();function yt(t){return new vt(t)}var dt=function(){function t(){return s(this,t),d(this,l(t).apply(this,arguments))}return f(t,D),u(t,[{key:"proxy",value:function(e){var t=this,r=new p.Subscription(function(){t.untrack(r)});return this.inputs.entries.forEach(function(t){return e.in(t[0]).from(t[1])}),this.outputs.entries.forEach(function(n){r.add(e.out(n[0]).observable.subscribe(function(t){n[1].emit(t)}))}),this.track(r)}},{key:"createOutput",value:function(t){return this.checkOutput(t),new vt}}]),t}();var kt={},_t=function(){function r(){var t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:kt,e=1<arguments.length?arguments[1]:void 0;return s(this,r),n!=((t=d(this,l(r).call(this,{inputs:["value"],outputs:["value"]}))).initial=kt)||e?e?(t.initial=n,t.compare=e):"function"==typeof n?t.compare=n:(t.initial=n,t.compare=i):(t.initial=kt,t.compare=i),t._subject=new p.BehaviorSubject(H(t.initial)),t._injector=yt(),t}return f(r,D),u(r,[{key:"bind",value:function(){return this.track(this.output.observable.subscribe()),this}},{key:"clear",value:function(){return this._subject.complete(),k(l(r.prototype),"clear",this).call(this)}},{key:"createOutput",value:function(t){var n=this;return this.checkOutput(t),O(this.input,this._injector).to(rt(function(t){return!n.compare(t,n.value)})).to(yt(this._subject)).to(rt(function(t){return t!==kt}))}},{key:"createEntries",value:function(){return[this.input]}},{key:"createExits",value:function(){return[this.output]}},{key:"input",get:function(){return this.in("value")}},{key:"output",get:function(){return this.out("value")}},{key:"value",get:function(){return this._subject.value.value!==kt?this._subject.value.value:void 0},set:function(t){this._injector.send(t)}}]),r}();var bt=function(){function i(){var t;s(this,i);for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return(t=d(this,l(i).call(this,{inputs:["target"],outputs:e.map(function(t,n){return n.toString()})}))).cases=e,t}return f(i,D),u(i,[{key:"case",value:function(t){return this.out(t)}},{key:"createOutput",value:function(t){this.checkOutput(t);var n=this.cases[t];return this.target.to(rt("function"==typeof n?n:function(t){return n===t}))}},{key:"target",get:function(){return this.in("target")}}]),i}();var gt=function(){function t(){var n;return s(this,t),(n=d(this,l(t).call(this,{inputs:["input"],outputs:["output","error"]})))._err=yt(),n._gate=n.input.to(nt(c.tap(null,function(t){!function(t){return t instanceof Error&&t.original instanceof Error&&t.emission instanceof W}(t)?n._err.send(t):n._err.emit(H(t,t.emission.context))}),c.retry(),c.share())),n}return f(t,D),u(t,[{key:"createOutput",value:function(t){return this.checkOutput(t),"error"==t?O(this._err,this._gate.to(it())).to(I()):this._gate}},{key:"createEntries",value:function(){return[this.input]}},{key:"createExits",value:function(){return[this.output,this.error]}},{key:"clear",value:function(){return this._err.clear(),k(l(t.prototype),"clear",this).call(this)}},{key:"input",get:function(){return this.in("input")}},{key:"output",get:function(){return this.out("output")}},{key:"error",get:function(){return this.out("error")}}]),t}();function mt(n,e){return{accepts:function(t,n){return void 0===e||n.length<e},complete:function(t){return t.length>=n}}}var wt=mt(0),Et=mt(1),Ot=function(){function n(t){var e;return s(this,n),(e=d(this,l(n).call(this,{inputs:t.map(function(t,n){return n.toString()}),outputs:["out"]})))._head=0,e._control=new Q,e._relay=new P,e.tokens=t.map(function(t){return"number"==typeof t?function(t){return mt(t,t)}(t):"+"===t?Et:"*"===t?wt:t}),t.forEach(function(t,n){e.in(n).to(nt(c.map(function(t){return e._take(t,n,!0),t}))).to(e._relay)}),e.reset(),e}return f(n,D),u(n,[{key:"_take",value:function(t,n,e){var r=2<arguments.length&&void 0!==e&&e;n==this._head?this.tokens[n].accepts(t,this._seq[n])?this._seq[n].push(t):(this.reset(),r&&this._take(t,n)):n<this._head?(this.reset(),this._take(t,n)):this._seek(n)?this._take(t,n,r):(this.reset(),this._seek(n)&&this._take(t,n,r))}},{key:"_seek",value:function(t){for(var n=this._head;n<t;n++)if(!this.tokens[n].complete(this._seq[n]))return!1;return this._head=t,!0}},{key:"reset",value:function(){return this._seq=this.tokens.map(function(t){return[]}),this._head=0,this}},{key:"createOutput",value:function(t){var n=this;return this.checkOutput(t),O(this._control.to(ot(function(){return n.reset()})).to(it()),this._relay.to(rt(function(){return n._complete}))).to(nt(c.map(function(){var t=n._seq.map(function(t){return 1==t.length?t[0].value:t.map(function(t){return t.value})});return W.from(n._seq.reduce(function(t,n){return t.concat(n)},[]),1==n.tokens.length?t[0]:t)}),c.share()))}},{key:"createEntries",value:function(){var n=this;return(this.signature.inputs||[]).map(function(t){return n.in(t)})}},{key:"createExits",value:function(){return[this.output]}},{key:"clear",value:function(){return this.reset(),this._control.clear(),this._relay.clear(),k(l(n.prototype),"clear",this).call(this)}},{key:"_complete",get:function(){var e=this;return this._seq.every(function(t,n){return e.tokens[n].complete(t)})}},{key:"control",get:function(){return this._control}},{key:"output",get:function(){return this.out("out")}}]),n}();var xt=function(){function r(t){var n,e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return s(this,r),(n=d(this,l(r).call(this,{inputs:t,outputs:["output"]}))).keys=t,n.pop=e,n._cache={},n._inject=new vt,n}return f(r,D),u(r,[{key:"_receive",value:function(n,e){var r=this;e.context.__fork?e.context.__fork instanceof L?e.context.__fork.values.forEach(function(t){return r._fill(t,n,e)}):this._fill(e.context.__fork,n,e):this._fill([],n,e)}},{key:"_cache_key",value:function(t){return t.join(";")}},{key:"_fill",value:function(t,n,e){var r=this._cache_key(t),i=this._cache[r]=this._cache[r]||{};i[n]=e,this._complete(i)&&this._emit(i,t)}},{key:"_emit",value:function(t,n){delete this._cache[this._cache_key(n)];var e=W.from(Object.values(t),Object.entries(t).reduce(function(t,n){return t[n[0]]=n[1].value,t},{}));e.context.__fork=this.pop?n.slice(0,-1):b(n),this._inject.emit(e)}},{key:"_complete",value:function(t){return Object.values(t).length==this.keys.length}},{key:"createOutput",value:function(t){var e=this;return this.checkOutput(t),O(O.apply(void 0,b(this.keys.map(function(n){return e.in(n).to(nt(c.tap(function(t){return e._receive(n,t)})))}))).to(it()),this._inject).to(I())}},{key:"createEntries",value:function(){var n=this;return this.keys.map(function(t){return n.in(t)})}},{key:"createExits",value:function(){return[this.output]}},{key:"clear",value:function(){return this._inject.clear(),this._cache={},this}},{key:"output",get:function(){return this.out("output")}}]),r}();function jt(t){return X(t)}function At(a,f,l,h){return ot(function(t,e,r,i){function u(){Object.values(c).forEach(function(t){return t.clear()}),o.clear(),s.unsubscribe(),l&&l(s)}var o=a(),c={},s=new p.Subscription;t&&Object.keys(t).forEach(function(t){return o.in(t).from(c[t]=yt())});var n=o.signature.outputs||[];h&&(n=h()),n.forEach(function(n){s.add(o.out(n).subscribe(function(t){u(),e({label:n,value:t})},function(t){u(),r(t)}))}),f&&f(s),t&&Object.entries(t).forEach(function(t){var n=_(t,2),e=n[0],r=n[1];return c[e].emit(H(r,i))})})}var St=function(){function r(t,n){var e;return s(this,r),(e=d(this,l(r).call(this,n||t.signature||t().clear().signature))).ref=t,e._all_subs=new p.Subscription,e._control_required=!0,e._control=new Q,e._relay=Z(X(e.inputs),e._control.to(ot(function(){return e._control_required=!1}))).to(rt(function(){return!e._control_required})).to(ot(function(t){return e._control.connected&&(e._control_required=!0),t[0]})).to(At(e.ref,function(t){return e._all_subs.add(t)},function(t){return e._all_subs.remove(t)},function(){return e.outputs.entries.map(function(t){var n=_(t,2),e=n[0];n[1];return e})})),e}return f(r,D),u(r,[{key:"createOutput",value:function(n){return this.checkOutput(n),this._relay.to(rt(function(t){return t.label==n})).to(ot(function(t){return t.value}))}},{key:"createEntries",value:function(){var n=this;return(this.signature.inputs||[]).map(function(t){return n.in(t)})}},{key:"createExits",value:function(){var n=this;return this.signature.outputs.map(function(t){return n.out(t)})}},{key:"clear",value:function(){return this._relay.clear(),this._control.clear(),this._all_subs.unsubscribe(),k(l(r.prototype),"clear",this).call(this)}},{key:"control",get:function(){return this._control}}]),r}();var Mt=function(){function n(i){var t;return s(this,n),((t=d(this,l(n).call(this,{inputs:["value"],outputs:["pass","fail"]}))).predicate=i).length<=1?t.core=t.input.to(ot(function(t){return[t,i(t)]})):t.core=t.input.to(ot(function(n,e,t,r){return i(n,function(t){return e([n,t])},t,r)})),t}return f(n,D),u(n,[{key:"createOutput",value:function(t){return this.checkOutput(t),"pass"==t?this.core.to(rt(function(t){var n=_(t,2);n[0];return n[1]})).to(ot(function(t){var n=_(t,2),e=n[0];n[1];return e})):this.core.to(rt(function(t){var n=_(t,2);n[0];return!n[1]})).to(ot(function(t){var n=_(t,2),e=n[0];n[1];return e}))}},{key:"createEntries",value:function(){return[this.input]}},{key:"createExits",value:function(){return[this.pass,this.fail]}},{key:"input",get:function(){return this.in("value")}},{key:"pass",get:function(){return this.out("pass")}},{key:"fail",get:function(){return this.out("fail")}}]),n}();var qt=function(){function i(t,n){var r;s(this,i),(r=d(this,l(i).call(this,n))).factory=t;var e=_(r.factory(function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return n.forEach(function(t){return r.add(t)})}),2);return r.inpins=e[0],r.outpins=e[1],r}return f(i,z),u(i,[{key:"init",value:function(){}},{key:"wire",value:function(){}},{key:"build",value:function(){}},{key:"createInput",value:function(t){return this.inpins[t]}},{key:"createOutput",value:function(t){return this.outpins[t]}},{key:"createEntries",value:function(){return Object.values(this.inpins)}},{key:"createExits",value:function(){return Object.values(this.outpins)}}]),i}();var Pt=function(){function e(){var t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};return s(this,e),(t=d(this,l(e).call(this,[c.tap(function(t){return n(t.value,t.context)})]))).func=n,t._bound=!1,t}return f(e,tt),u(e,[{key:"bind",value:function(){return this._bound||(this._bound=!0,this.track(this.subscribe())),this}},{key:"bound",get:function(){return this._bound}}]),e}();function It(t){return new Pt(t)}var Ct="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_",Rt=10;function Ft(t,n){for(var e=0<arguments.length&&void 0!==t?t:Rt,r=1<arguments.length&&void 0!==n?n:Ct,i="",u=0;u<e;u++)i+=r[Math.floor(Math.random()*r.length)];return i}var Lt=function(){function o(t,n,e){var u;return s(this,o),(u=d(this,l(o).call(this,e||{inputs:["value"],outputs:["value"]}))).bound=!1,u.reemit=new vt,u.downPropageteKey=Ft(),t instanceof _t?u.state=t:(u.accessor=t,u.state=new _t(u.accessor.initial,n),u.accessor.get.to(ot(function(t,n,e,r){r[u.downPropageteKey]=!0,n(t)})).to(y(u)).to(rt(function(t,n,e,r){var i=r[u.downPropageteKey];delete r[u.downPropageteKey],n(!i)})).to(u.accessor.set)),u}return f(o,D),u(o,[{key:"sub",value:function(e,t){var r=this,i=!1,u=this;return(t||function(t,n){return new o(t,n)})({initial:(u.value||[])[e],get:u.output.to(ot(function(t){return(t||[])[e]})),set:It(function(t,n){try{u.value||(u.value=[]),r.accessor?u.value=Array.isArray(u.value)?Object.assign([],u.value,a({},e,t)):Object.assign({},u.value,a({},e,t)):(u.value[e]=t,i?r.reemit.emit(H(t,n)):i=!0)}catch(t){}}),bind:function(t){return t(this.set.subscribe())}},this.state.compare)}},{key:"bind",value:function(){var n=this;return this.bound||(this.accessor?this.accessor.bind(function(t){return n.track(t)}):this.track(this.output.subscribe()),this.bound=!0),this}},{key:"createOutput",value:function(t){var n=this;return this.checkOutput(t),O(this.input.to(this.state),this.reemit.to(ot(function(){return n.value})))}},{key:"createEntries",value:function(){return[this.input]}},{key:"createExits",value:function(){return[this.output]}},{key:"value",get:function(){return this.state.value},set:function(t){this.state.value=t}},{key:"compare",get:function(){return this.state.compare}},{key:"input",get:function(){return this.in("value")}},{key:"output",get:function(){return this.out("value")}}]),o}(),Nt=function(){function o(t,n,e){var r;return s(this,o),(r=d(this,l(o).call(this,t,e,{inputs:["value"],outputs:["value","changes"]}))).keyfunc=n,r._keyMap={},r}return f(o,Lt),u(o,[{key:"key",value:function(r,t){var i=this,u=!1,o=this;return(t||function(t,n){return new Lt(t,n)})({initial:(o._keyMap[r]||{item:void 0}).item||(Object.values(this.value)||[]).find(function(t){return i.keyfunc(t)==r}),get:O(o.changes,o.reemit).to(ot(function(){return(o._keyMap[r]||{item:void 0}).item})),set:It(function(t,n){try{var e=o._keyMap[r];e&&(e.item=t,o.accessor?o.value=Array.isArray(o.value)?Object.assign([],o.value,a({},e.index,t)):Object.assign({},o.value,a({},e.index,t)):(o.value[e.index]=t,u?i.reemit.emit(H(t,n)):u=!0))}catch(t){}}),bind:function(t){return t(this.set.subscribe())}},this.state.compare)}},{key:"index",value:function(r){var i=this;return O(jt(this._keyMap[r]?this._keyMap[r].index:((Object.entries(this.value)||[]).find(function(t){var n=_(t,2),e=(n[0],n[1]);return i.keyfunc(e)==r})||[-1,void 0])[0]),O(this.changes,this.reemit).to(ot(function(){return(i._keyMap[r]||{index:-1}).index}))).to(nt(c.distinctUntilKeyChanged("value")))}},{key:"bind",value:function(){return k(l(o.prototype),"bind",this).call(this),this.track(this.changes.subscribe()),this}},{key:"createOutput",value:function(t){var i=this;if("changes"!==t)return k(l(o.prototype),"createOutput",this).call(this,t);this.output;var u=!0;return this.state.to(ot(function(t,n){var e=function(t,o,c){var s=[],u=[],a=[],f=Object.entries(t).reduce(function(t,n){var e=_(n,2),r=e[0],i=e[1],u=c(i);return t[u]={index:r,item:i},u in o||s.push({index:r,item:i}),t},{});return Object.entries(o).forEach(function(t){var n=_(t,2),e=n[0],r=n[1];if(e in f){var i=f[e];i.index!=r.index&&a.push({oldIndex:r.index,newIndex:i.index,item:r.item})}else u.push(r)}),{changes:{additions:s,deletions:u,moves:a},newKeyMap:f}}(t,i._keyMap,i.keyfunc);i._keyMap=e.newKeyMap;var r=Object.assign({},e.changes,{initial:u});u=!1,n(r)}))}},{key:"keys",get:function(){return Object.keys(this._keyMap)}},{key:"changes",get:function(){return this.out("changes")}}]),o}();var Tt=function(){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;return s(this,r),d(this,l(r).call(this,[c.map(function(t){var n=[].concat(t.context.__fork||[]);return n.push(r._create_fork_tag(e)),H(t.value,Object.assign({},t.context,{__fork:n}))}),c.share()]))}return f(r,tt),u(r,null,[{key:"_create_fork_tag",value:function(t){return Ft(0<arguments.length&&void 0!==t?t:10)}}]),r}();var Kt={},Dt=function(){function t(r){var i,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Kt;return s(this,t),(i=d(this,l(t).call(this,r.length<=2?[c.map(function(t){return(i._acc||(i._acc=i._init(t,u),u!==Kt))&&(i._acc=W.from([i._acc,t],r(i._acc.value,t.value))),i._acc})]:[c.mergeMap(function(e){return new p.Observable(function(n){if(!i._acc&&(i._acc=i._init(e,u),u===Kt))return n.next(i._acc),void n.complete();r(i._acc.value,e.value,function(t){i._acc=W.from([i._acc,e],t),n.next(i._acc),n.complete()},function(t){n.error(new $(t,e))},e.context,i._acc.context)})}),c.share()]))).reduce=r,i.start=u,i._acc=void 0,i}return f(t,tt),u(t,[{key:"_init",value:function(t,n){return n!==Kt?t.fork(n):t}}]),t}();var Bt=function(){function t(){return s(this,t),d(this,l(t).call(this,[c.mergeMap(function(n){return n.value.map?p.from(n.value.map(function(t){return n.fork(t)})):p.of(n)})]))}return f(t,tt),t}();var Gt=function(){function e(t){var n;return s(this,e),(n=d(this,l(e).call(this))).observable=t.pipe(c.map(function(t){return H(t)})),n}return f(e,A),u(e,[{key:"connect",value:function(t){throw new S}}]),e}();return t.Agent=D,t.Check=Mt,t.ChildIsNotAgent=G,t.ChildIsNotPin=U,t.ChildNotDefined=B,t.Composition=z,t.Connectible=q,t.Control=Q,t.Emission=W,t.EmissionError=$,t.Expr=ft,t.Filter=et,t.Fork=Tt,t.Gate=ht,t.Group=E,t.GroupObservableError=e,t.HandleError=gt,t.InputNotInSignature=N,t.InsufficientInputs=ct,t.Invoke=St,t.Join=xt,t.KeyedDeep=Nt,t.Map=ut,t.MergedEmissionContextVal=L,t.Node=st,t.NodeWrap=pt,t.OutputNotInSignature=T,t.Pack=Y,t.PartialFlow=m,t.Pin=P,t.PinLockedError=S,t.PinMap=C,t.Pipe=tt,t.Proxy=dt,t.Reduce=Dt,t.Sequence=Ot,t.SimpleDeep=Lt,t.Sink=Pt,t.Source=vt,t.Spread=Bt,t.State=_t,t.Switch=bt,t.UnresolvedPinObservableError=M,t._switch=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return h(bt,n)},t.block=it,t.call=function(t,n){return jt(n).to(At(t))},t.check=function(t){return new Mt(t)},t.composition=function(t,n){var e;if(n)e=t;else{var r=[],i=(n=t)(function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];r=r.concat(n)});e={inputs:Object.keys(i[0]),outputs:Object.keys(i[1])},r.forEach(function(t){return t.clear()})}function u(){return new qt(n,e)}return u.signature=e,u},t.control=X,t.deep=function(t,n){return n?new Nt(t,n):new Lt(t)},t.emission=H,t.exec=At,t.expr=lt,t.filter=rt,t.fork=function(){return new Tt(0<arguments.length&&void 0!==arguments[0]?arguments[0]:10)},t.gate=function(){return new ht},t.group=O,t.handleError=function(){return new gt},t.invoke=function(t,n){return new St(t,n)},t.isAgentLike=F,t.isBindable=g,t.isClearable=function(t){return!!t.clear&&"function"==typeof t.clear},t.isNodeLike=function(t){return void 0!==t&&t.control instanceof Q&&F(t)},t.isPinLike=function(t){return void 0!==t&&"function"==typeof t.from&&"function"==typeof t.to&&"observable"in t&&"function"==typeof t.subscribe},t.isSignature=R,t.join=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return new xt(n)},t.keyed=function(e){return function(t,n){return new Nt(t,e,n)}},t.map=ot,t.node=function(t,n){return function(){return new at(t,n)}},t.nodeWrap=function(t){return t instanceof st?t:new pt(t)},t.pack=Z,t.partialFlow=function(t){return new w(t)},t.peekJoin=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return new xt(n,!1)},t.pin=I,t.pipe=nt,t.proxy=function(t){return new dt(t)},t.reduce=function(t){return new Dt(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:Kt)},t.sampler=function(){return lt(function(t){return t})},t.sequence=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return new Ot(n)},t.singleton=function(){return function(n){var t,e=new n;return g(e)&&e.bind(),(t=function(){function t(){return s(this,t),d(this,l(t).apply(this,arguments))}return f(t,n),t}()).instance=e,t}},t.sink=It,t.source=yt,t.spread=function(){return new Bt},t.state=function(t,n){return new _t(t,n)},t.value=jt,t.wrap=function(t){return new Gt(t)},t}({},rxjs,rxjs.operators,_.isEqual);
