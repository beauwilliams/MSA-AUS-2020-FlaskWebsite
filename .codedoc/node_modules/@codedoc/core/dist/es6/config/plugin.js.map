{"version":3,"file":"plugin.js","sourceRoot":"","sources":["../../../src/config/plugin.ts"],"names":[],"mappings":"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","sourcesContent":["import { ConfigOverride } from './override.type';\n\n\nexport type Plugin = (config: ConfigOverride) => ConfigOverride;\n\n\nexport function plug(config: ConfigOverride, plugin: Plugin) {\n  const res: ConfigOverride = { ...config };\n  const override = plugin(config);\n\n  if (override.src) res.src = Object.assign({}, override.src, config.src);\n  if (override.dest) res.dest = Object.assign({}, override.dest, config.dest);\n  if (override.bundle) {\n    res.bundle = res.bundle || {};\n    res.bundle.init = [...config.bundle?.init || [], ...override.bundle.init || []];\n  }\n  if (override.afterBuild) {\n    res.afterBuild = [...config.afterBuild || [], ... override.afterBuild];\n  }\n  if (override.page) {\n    res.page = res.page || {};\n    if (override.page.title) res.page.title = Object.assign({}, override.page.title, config.page?.title);\n    if (override.page.favicon) res.page.favicon = config.page?.favicon || override.page.favicon;\n    if (override.page.meta) res.page.meta = Object.assign({}, override.page.meta, config.page?.meta, {\n      keywords: [...config.page?.meta?.keywords || [], ...override.page.meta.keywords || []]\n    });\n    if (override.page.fonts) res.page.fonts = Object.assign({}, override.page.fonts, config.page?.fonts);\n    if (override.page.scripts) res.page.scripts = (config.page?.scripts || []).concat(override.page.scripts);\n    if (override.page.stylesheets) \n      res.page.stylesheets = (config.page?.stylesheets || []).concat(override.page.stylesheets);\n    if (override.page.post) res.page.post = (config.page?.post || []).concat(override.page.post);\n  }\n\n  if (override.dev) config.dev = Object.assign({}, override.dev, config.dev);\n  if (override.markdown) {\n    res.markdown = Object.assign({}, override.markdown, config.markdown, {\n      customComponents: { ...override.markdown.customComponents, ...config.markdown?.customComponents },\n      customInlineComponents: \n      { ...override.markdown.customInlineComponents, ...config.markdown?.customInlineComponents },\n    });\n  }\n\n  if (override.tocMarkdown) {\n    res.tocMarkdown = Object.assign({}, override.tocMarkdown, config.tocMarkdown, {\n      customComponents: { ...override.tocMarkdown.customComponents, ...config.tocMarkdown?.customComponents },\n      customInlineComponents: \n      { ...override.tocMarkdown.customInlineComponents, ...config.tocMarkdown?.customInlineComponents },\n    });\n  }\n\n  if (override.misc) res.misc = Object.assign({}, override.misc, config.misc);\n\n  return res;\n}\n"]}