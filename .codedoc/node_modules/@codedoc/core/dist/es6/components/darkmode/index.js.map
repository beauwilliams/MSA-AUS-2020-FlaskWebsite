{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../src/components/darkmode/index.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,MAAM,yBAAyB,CAAC;AAGpD,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,gBAAgB,CAAC;AAG7C,OAAO,EAAE,mBAAmB,EAAE,MAAM,SAAS,CAAC;AAC9C,OAAO,EAAE,UAAU,EAAE,IAAI,EAAE,MAAM,QAAQ,CAAC;AAC1C,OAAO,EAAE,UAAU,EAAE,MAAM,UAAU,CAAC;AAGtC,MAAM,UAAU,cAAc,CAE5B,CAAM,EACN,QAAgC;IAEhC,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;IACxD,MAAM,OAAO,GAAG,UAAU,EAAE,CAAC;IAC7B,MAAM,WAAW,GAAG,KAAK,EAAE,CAAC;IAC5B,IAAI,aAAa,GAAG,KAAK,CAAC;IAE1B,OAAO,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC;IAExB,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;QACpC,IAAI,IAAI,KAAK,IAAI,CAAC,KAAK;YAAE,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;;YAC3D,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAEzC,IAAI,aAAa,EAAE;YACjB,IAAI,IAAI,KAAK,OAAO,CAAC,KAAK;gBAAE,YAAY,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,KAAK,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;;gBACnG,YAAY,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;SAC3C;IACH,CAAC,CAAC,CAAC,CAAC,CAAC;IAEL,IAAI,CAAC,KAAK,CAAC;QACT,IAAI;YACF,IAAI,YAAY,CAAC,OAAO,CAAC,WAAW,CAAC;gBACnC,WAAW,CAAC,KAAK,GAAG,YAAY,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;YAE5F,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;YACjD,aAAa,GAAG,IAAI,CAAC;QACvB,CAAC;KACF,CAAC,CAAC;IAEH,OAAO,yBAAK,KAAK,EAAE,OAAO,CAAC,QAAQ,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,KAAK,GAAG,UAAU,CAAC,WAAW,CAAC,KAAK,CAAC;QACnG,yBAAK,KAAK,EAAC,KAAK,GAAE;QAClB,yBAAK,KAAK,EAAC,MAAM,GAAE;QACnB,yBAAK,KAAK,EAAC,SAAS,GAAE;QACtB,yBAAK,KAAK,EAAC,SAAS,GAAE;QACtB,yBAAK,KAAK,EAAC,WAAW,GAAE;QACxB,yBAAK,KAAK,EAAC,UAAU,GAAE;QACvB,yBAAK,KAAK,EAAC,UAAU,GAAE;QACvB,yBAAK,KAAK,EAAC,SAAS,GAAE;QACtB,yBAAK,KAAK,EAAC,WAAW,GAAE;QACxB,yBAAK,KAAK,EAAC,WAAW,GAAE,CACpB,CAAA;AACR,CAAC;AAGD,MAAM,CAAC,MAAM,eAAe,GAAG,aAAa,CAAA,SAAS,CAAC,cAAc,CAAC,CAAC;AACtE,cAAc,aAAa,CAAC;AAC5B,OAAO,EAAE,mBAAmB,EAAE,MAAM,SAAS,CAAC","sourcesContent":["import { transport } from '@connectv/sdh/transport';\nimport { RendererLike } from '@connectv/html';\nimport { ThemedComponentThis } from '@connectv/jss-theme';\nimport { state, sink } from '@connectv/core';\n\nimport { CodedocTheme } from '../../theme';\nimport { DarkModeSwitchStyle } from './style';\nimport { switchMode, Mode } from './mode';\nimport { systemMode } from './system';\n\n\nexport function DarkModeSwitch(\n  this: ThemedComponentThis<CodedocTheme>,\n  _: any, \n  renderer: RendererLike<any, any>,\n) {\n  const classes = this.theme.classes(DarkModeSwitchStyle);\n  const sysMode = systemMode();\n  const runningMode = state();\n  let storageLoaded = false;\n\n  sysMode.to(runningMode);\n\n  this.track(runningMode.to(sink(mode => {\n    if (mode === Mode.Light) document.body.classList.remove('dark');\n    else document.body.classList.add('dark');\n\n    if (storageLoaded) {\n      if (mode !== sysMode.value) localStorage.setItem('dark-mode', (mode === Mode.Light) ? 'false' : 'true');\n      else localStorage.removeItem('dark-mode');\n    }\n  })));\n\n  this.track({\n    bind() {\n      if (localStorage.getItem('dark-mode'))\n        runningMode.value = localStorage.getItem('dark-mode') === 'true' ? Mode.Dark : Mode.Light;\n\n      document.body.classList.add('dark-mode-animate');\n      storageLoaded = true;\n    }\n  });\n\n  return <div class={classes.dmSwitch} onclick={() => runningMode.value = switchMode(runningMode.value)}>\n    <div class=\"arc\"/>\n    <div class=\"darc\"/>\n    <div class=\"ray one\"/>\n    <div class=\"ray two\"/>\n    <div class=\"ray three\"/>\n    <div class=\"ray four\"/>\n    <div class=\"ray five\"/>\n    <div class=\"ray six\"/>\n    <div class=\"ray seven\"/>\n    <div class=\"ray eight\"/>\n  </div>\n}\n\n\nexport const DarkModeSwitch$ = /*#__PURE__*/transport(DarkModeSwitch);\nexport * from './darklight';\nexport { DarkModeSwitchStyle } from './style';"]}