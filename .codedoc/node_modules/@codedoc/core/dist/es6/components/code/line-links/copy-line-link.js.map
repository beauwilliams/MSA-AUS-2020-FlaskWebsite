{"version":3,"file":"copy-line-link.js","sourceRoot":"","sources":["../../../../../src/components/code/line-links/copy-line-link.tsx"],"names":[],"mappings":"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","sourcesContent":["import { funcTransport, onReady } from '@connectv/sdh/transport';\n\nimport { getRenderer } from '../../../transport/renderer';\nimport { copyToClipboard } from '../../../transport/clipboard';\nimport { Overlay } from '../../util/overlay';\nimport { lineLink, linkedLines } from './line-link';\n\n\nexport function copyLineLinks() {\n  const renderer = getRenderer();\n\n  onReady(() => {\n    const _exec = () => {\n      document.querySelectorAll('pre>code>.-codedoc-code-line').forEach(line$ => {\n        const counter$ = line$.querySelector('.-codedoc-line-counter');\n        counter$?.addEventListener('click', event => {\n          event.stopPropagation();\n\n          const link = lineLink(line$ as HTMLElement);\n          copyToClipboard(link!!, () => renderer.render(<Overlay>\n            Copied to Clipboard!\n            <br/>\n            <a href={link} style=\"font-size: 14px\">{link}</a>\n          </Overlay>).on(document.body));\n        });\n\n        counter$?.addEventListener('mousedown', event => event.stopPropagation());\n        counter$?.addEventListener('mouseup', event => event.stopPropagation());\n      });\n    };\n\n    const _detect = () => {\n      const linked = linkedLines();\n\n      if (linked.length > 0) {\n        linked[0].parentElement?.querySelectorAll('.selected').forEach(el => el.classList.remove('selected'));\n      }\n\n      linked.forEach(line$ => {\n        line$?.classList.add('selected');\n        line$?.parentElement?.classList.add('has-selection');\n      });\n\n      if (linked.length > 0)\n        setTimeout(() => linked[0]?.scrollIntoView({ block: 'center' }), 300);\n    };\n\n    _exec();\n    _detect();\n\n    window.addEventListener('navigation', () => { _exec(); _detect(); });\n    window.addEventListener('hashchange', _detect);\n  });\n}\n\nexport const copyLineLiks$ = /*#__PURE__*/funcTransport(copyLineLinks);"]}