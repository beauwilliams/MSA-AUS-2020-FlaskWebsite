{"version":3,"file":"write-file.js","sourceRoot":"","sources":["../../../src/fs/write-file.ts"],"names":[],"mappings":";;;;;;;;;AAAA,OAAO,EAAE,SAAS,IAAI,MAAM,EAAE,MAAM,IAAI,CAAC;AACzC,OAAO,EAAE,IAAI,EAAE,MAAM,MAAM,CAAC;AAE5B,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAI3C,MAAM,UAAU,SAAS,CAAC,UAAyB,EAAE;IACnD,MAAM,KAAK,GAAG,OAAO,CAAC,IAAI,IAAI,EAAE,CAAC;IACjC,OAAO,UAAe,CAAe;;YACnC,MAAM,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC;YACpB,MAAM,IAAI,GAAG,KAAK,IAAI,CAAC,CAAC,IAAI,CAAC;YAC7B,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAEjC,MAAM,UAAU,CAAC,OAAO,CAAC,CAAC;YAC1B,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;gBACrC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC,OAAO,EAAE,GAAG,CAAC,EAAE;oBAC/B,wBAAwB;oBACxB,IAAI,GAAG;wBAAE,MAAM,CAAC,GAAG,CAAC,CAAC;;wBAChB,OAAO,CAAC,CAAC,CAAC,CAAC;gBAClB,CAAC,CAAC,CAAA;YACJ,CAAC,CAAC,CAAC;QACL,CAAC;KAAA,CAAA;AACH,CAAC","sourcesContent":["import { writeFile as writef } from 'fs';\nimport { join } from 'path';\n\nimport { ensurePath } from './ensure-path';\nimport { File, FileIOOptions } from './types';\n\n\nexport function writeFile(options: FileIOOptions = {}) {\n  const _root = options.root || '';\n  return async function(f: File<string>): Promise<File<string>> {\n    const path = f.path; \n    const root = _root || f.root;\n    const abspath = join(root, path);\n\n    await ensurePath(abspath);\n    return new Promise((resolve, reject) => {\n      writef(abspath, f.content, err => {\n        /* istanbul ignore if */\n        if (err) reject(err);\n        else resolve(f);\n      })\n    });\n  }\n}\n"]}