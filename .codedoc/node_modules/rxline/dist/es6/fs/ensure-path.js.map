{"version":3,"file":"ensure-path.js","sourceRoot":"","sources":["../../../src/fs/ensure-path.ts"],"names":[],"mappings":";;;;;;;;;AAAA,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,MAAM,CAAC;AACrC,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,IAAI,CAAC;AAKnC,SAAS,WAAW,CAAC,IAAY;IAC/B,MAAM,GAAG,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;IAE1B,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;QACrC,MAAM,CAAC,GAAG,EAAE,CAAM,MAAM,EAAC,EAAE;YACzB,IAAI,MAAM;gBAAE,OAAO,EAAE,CAAC;iBACjB;gBACH,IAAI,OAAO,CAAC,GAAG,CAAC,KAAK,GAAG;oBAAE,MAAM,WAAW,CAAC,GAAG,CAAC,CAAC;gBAEjD,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE;oBACf,wBAAwB;oBACxB,IAAI,GAAG;wBAAE,MAAM,CAAC,GAAG,CAAC,CAAC;;wBAChB,OAAO,EAAE,CAAC;gBACjB,CAAC,CAAC,CAAC;aACJ;QACH,CAAC,CAAA,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC;AAGD,MAAM,UAAU,UAAU,CAAC,CAAgC;IACzD,IAAI,OAAO,CAAC,KAAK,QAAQ;QAAE,OAAO,WAAW,CAAC,CAAC,CAAC,CAAC;;QAC5C,OAAO,WAAW,CAAC,IAAI,CAAE,CAAS,CAAC,IAAI,IAAI,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;AAC/D,CAAC","sourcesContent":["import { dirname, join } from 'path';\nimport { mkdir, exists } from 'fs';\n\nimport { PathFull, File } from './types';\n\n\nfunction _ensurePath(path: string): Promise<void> {\n  const dir = dirname(path);\n\n  return new Promise((resolve, reject) => {\n    exists(dir, async exists => {\n      if (exists) resolve();\n      else {\n        if (dirname(dir) !== '.') await _ensurePath(dir);\n\n        mkdir(dir, err => {\n          /* istanbul ignore if */\n          if (err) reject(err);\n          else resolve();\n        });\n      }\n    });\n  });\n}\n\n\nexport function ensurePath(f: string | File<any> | PathFull) {\n  if (typeof f === 'string') return _ensurePath(f);\n  else return _ensurePath(join((f as any).root || '', f.path));\n}\n"]}